{"version":3,"sources":["node-xml-slicer.ts"],"names":["Slicer","Slicer.constructor","Slicer.itemResult","Slicer.checkEnterPath","Slicer.checkExitPath","Slicer.result","Slicer.result.typof","Slicer.result.remap"],"mappings":"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","file":"node-xml-slicer.js","sourcesContent":["'use strict';\ninterface Options {\n    textAttrName?: string;\n    attrNameMutator?: (input: string) => string;\n    propNameMutator?: (input: string) => string;\n    valueMutator?: (input: any) => any;\n}\n\n// @target: ES6\n// @module: commonjs\nexport default class Slicer {\n    private location = [];\n    private rootPath;\n    private withinPath: boolean = false;\n    public errors: string[] = null;\n    private nodeInfo = {};\n    private objectStack = [];\n    private result_;\n    private slicer;\n\n    private options: Options;\n    private hasPropertyNameMutator: boolean = false;\n\n    constructor(parser, rootPath?: string, options?: Options) {\n        this.rootPath = (rootPath || '').split('/').filter(i => { return !!i; });\n        if (!this.rootPath.length) {\n            this.rootPath = ['*'];\n        }\n\n        this.options = {\n            textAttrName: '#',\n            attrNameMutator: (input) => { return input; },\n            valueMutator: (input) => { return input }\n        };\n        this.options = Object.assign(this.options, options || {});\n        this.hasPropertyNameMutator = this.options.propNameMutator !== undefined;\n\n        parser.slicer = this;\n        this.slicer = this;\n        parser.on('startElement', (name, attrs) => {\n            var t = this.slicer;\n\n            t.location.push(name);\n            t.checkEnterPath();\n\n            if (t.withinPath) {\n                t.nodeInfo = { name: name };\n\n                var hasAttrs = false;\n                for (var i in attrs) {\n                    if (attrs.hasOwnProperty(i)) {\n                        hasAttrs = true;\n                        break;\n                    }\n                }\n\n                if (hasAttrs) {\n                    t.nodeInfo.attrs = attrs;\n                }\n\n                t.objectStack.push(t.nodeInfo);\n            }\n        });\n\n        parser.on('endElement', name => {\n            var t = this.slicer;\n\n            t.checkExitPath();\n            t.location.pop();\n\n            if (t.withinPath) {\n                var nodeInfo = t.objectStack.pop();\n                var justWhitespace = /^\\s+$/;\n\n                if (nodeInfo.attrs) {\n                    if (!nodeInfo.result) {\n                        nodeInfo.result = {};\n                        if (!justWhitespace.test(nodeInfo.text)) {\n                            nodeInfo.result[this.options.textAttrName] =\n                                this.options.valueMutator(nodeInfo.text);\n                        }\n                    }\n\n                    for (var i in nodeInfo.attrs) {\n                        if (nodeInfo.attrs.hasOwnProperty(i)) {\n                            nodeInfo.result[i] =\n                                this.options.valueMutator(nodeInfo.attrs[i]);\n                        }\n                    }\n                }\n\n                var parentNodeInfo = t.objectStack[t.objectStack.length - 1];\n                if (!parentNodeInfo.result) {\n                    parentNodeInfo.result = {};\n                }\n\n                if (parentNodeInfo.text && !justWhitespace.test(parentNodeInfo.text)) {\n                    parentNodeInfo.result[this.options.textAttrName] = parentNodeInfo.text.trim();\n                }\n\n                if (parentNodeInfo.result[nodeInfo.name]) {\n                    // make array\n\n                    if (!Array.isArray(parentNodeInfo.result[nodeInfo.name])) {\n                        parentNodeInfo.result[nodeInfo.name] = [parentNodeInfo.result[nodeInfo.name]];\n                    }\n\n                    if (nodeInfo.result) {\n                        parentNodeInfo.result[nodeInfo.name].push(nodeInfo.result);\n                    } else {\n                        parentNodeInfo.result[nodeInfo.name].push(nodeInfo.text || null);\n                    }\n                } else {\n                    if (nodeInfo.result) {\n                        parentNodeInfo.result[nodeInfo.name] = nodeInfo.result;\n                    } else {\n                        parentNodeInfo.result[nodeInfo.name] = nodeInfo.text || null;\n                    }\n                }\n            }\n        });\n\n        parser.on('text', text => {\n            var t = this.slicer;\n            if (t.withinPath) {\n                text = text.replace(/^ +$/, '');\n                if (text) {\n                    if (!t.nodeInfo.text) {\n                        t.nodeInfo.text = text;\n                    } else {\n                        t.nodeInfo.text += text;\n                    }\n                }\n            }\n        });\n\n        parser.on('error', error => {\n            if (!this.slicer.errors) {\n                this.slicer.errors = [];\n            }\n            this.slicer.errors.push('Error parsing XML: ' + error);\n            this.withinPath = false;\n        });\n    }\n\n    get result() {\n        if (this.result_ === undefined) {\n            if (this.errors || this.objectStack.length === 0) {\n                this.result_ = null;\n            } else if (this.objectStack.length === 1) {\n                this.result_ = {};\n                this.result_[this.objectStack[0].name] = this.itemResult(this.objectStack[0]);\n            } else {\n                this.result_ = {};\n                this.objectStack.forEach(item => {\n                    if (this.result_[item.name]) {\n                        if (!Array.isArray(this.result_[item.name])) {\n                            this.result_[item.name] = [this.result_[item.name]];\n                        }\n\n                        this.result_[item.name].push(this.itemResult(item));\n                    } else {\n                        this.result_[item.name] = this.itemResult(item);\n                    }\n                });\n            }\n\n            // After building the result object, re-map the property names\n            if (this.hasPropertyNameMutator && this.result_) {\n                var propMutator = this.options.propNameMutator;\n                function typof(val) {\n                    var str = Object.prototype.toString.call(val);\n                    return str\n                        .substring(str.indexOf(\" \") + 1, str.length - 1)\n                        .toLowerCase();\n                }\n\n                function remap(obj: Object) {\n                    var result = {};\n                    var keys = Object.keys(obj);\n                    var i, j;\n                    for (i = 0; i < keys.length; i += 1) {\n                        var value = obj[keys[i]];\n                        var _key = propMutator(keys[i]);\n                        result[_key] = value;\n\n                        if (typof(value) === \"object\") {\n                            result[_key] = remap(value);\n                        }\n\n                        if (typof(value) === \"array\") {\n                            result[_key] = [];\n                            for (j = 0; j < value.length; j += 1) {\n                                if (typof(value[j]) === \"object\") {\n                                    result[_key].push(remap(value[j]));\n                                } else {\n                                    result[_key].push(value[j]);\n                                }\n                            }\n                        }\n                    }\n\n                    return result;\n                }\n                this.result_ = remap(this.result_);\n            }\n        }\n\n        return this.result_;\n    }\n\n    private itemResult(item) {\n        if (item.result) {\n            return item.result;\n        } else {\n            if (item.attrs) {\n                var result = {};\n                result[this.options.textAttrName] =\n                    this.options.valueMutator(item.text);\n                for (var i in item.attrs) {\n                    if (item.attrs.hasOwnProperty(i)) {\n                        result[this.options.attrNameMutator(i)] =\n                            this.options.valueMutator(item.attrs[i]);\n                    }\n                }\n                return result;\n            } else {\n                return this.options.valueMutator(item.text);\n            }\n        }\n    }\n\n    private checkEnterPath() {\n        if (this.withinPath || this.location.length !== this.rootPath.length) {\n            return;\n        }\n\n        this.withinPath = !this.errors &&\n            this.rootPath.every((u, i) => { return u === this.location[i] || u === '*'; });\n    }\n\n    private checkExitPath() {\n        if (this.withinPath && this.location.length === this.rootPath.length) {\n            this.withinPath = false;\n        }\n    }\n}"],"sourceRoot":"/source/"}